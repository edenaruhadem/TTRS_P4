L = 1e6; % número de bits cuya transmisión vamos a simular.%VARN=0.1:0.2:20;VARN = logspace(-1,1.3,30);ser=[];ber=[];conste=[-3 -1 3 1];N=length(conste);Es=sum(abs(conste).^2)/N; % Energía media por símbolo (expresión no generalizable)Eb=Es/log2(N); % Energía media por bitfor i=1:length(VARN)i    varnoise = VARN(i); % potencia del ruido introducido por el canal.b = randn(L, 1) > 0; % bits que deseamos transmitirm = bits2pam(b); % símbolos transmitidosz = m + sqrt(varnoise)*randn(size(m)); % observacionessimb=quantalph(z,conste)';             % decisiones durasmdec = pam2bits(simb);                 % mensaje decodificadoser(i) = mean(m~=simb); % symbol error rateber(i) = mean(b~=mdec); % bit error rateendEsN0=Es./(2*VARN);EbN0=Eb./(2*VARN);% SER en función de Es/N0figure (1),semilogy(10*log10(EsN0),ser),grid,title('Symbol Error Rate (SER)');xlabel('Es/N_0 (dB)');ylabel('SER');legend('Simul.');